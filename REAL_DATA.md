# 実際のデータ取得について

## 現状の問題

現在の実装では**モックデータ**を使用しています。実際の映画館の実際の上映スケジュールを取得することは、以下の理由で困難です：

### 1. 法的問題
- TOHOシネマズなどの映画館サイトにはWebスクレイピングを禁止する利用規約がある
- 無断でのデータ取得は利用規約違反や法的問題につながる可能性

### 2. 技術的問題  
- 公式APIが提供されていない
- サイト構造が頻繁に変更される
- CAPTCHA、認証、動的コンテンツなどの対策がある

## 実用的な解決策

### ✅ **推奨: ユーザー入力方式**

最も確実で合法的な方法は、ユーザーが手動でスケジュールを入力する方式です：

1. ユーザーが映画館の公式サイトを確認
2. 見たい映画の上映時間を手動で入力
3. システムが最適なスケジュールパターンを生成

**メリット:**
- 完全に合法
- 最新の正確な情報
- 特別上映や条件も考慮可能

**実装例:**
```typescript
// src/lib/userInputSchedule.ts参照
```

### ⚠️ **条件付き: 公式APIの利用**

一部のサービスは公式APIを提供しています：

#### TMDb API
```bash
# .env.localに追加
NEXT_PUBLIC_TMDB_API_KEY=your_api_key_here
```

**取得できる情報:**
- 映画の基本情報（タイトル、上映時間、ジャンルなど）
- ポスター画像、あらすじ

**取得できない情報:**
- 日本の映画館での上映スケジュール
- 劇場ごとの上映時間

**使い方:**
1. https://www.themoviedb.org/settings/api でAPI Keyを取得
2. `.env.local`に設定
3. `searchMoviesFromTMDb()`関数で映画検索

### ⚠️ **非推奨: Webスクレイピング**

技術的には可能ですが、以下の理由で推奨しません：

**問題点:**
- 利用規約違反の可能性
- サイト構造変更で動作しなくなる
- サーバーに負荷をかける
- 法的リスク

**どうしても使用する場合:**
1. サイト運営者に許可を取る
2. robots.txtを確認
3. 適切なレート制限を実装
4. 商用利用は避ける

### ✅ **将来的な解決策: データベース構築**

手動でキュレーションしたデータベースを構築：

1. ボランティアやクラウドソーシングでデータ収集
2. 定期的に更新
3. APIとして提供

**実装例:**
```sql
CREATE TABLE movie_schedules (
  id SERIAL PRIMARY KEY,
  movie_title VARCHAR(255),
  theater_id VARCHAR(50),
  showtime TIME,
  date DATE,
  available BOOLEAN,
  created_at TIMESTAMP DEFAULT NOW()
);
```

## 現在の実装で試す方法

### オプション1: モックデータで機能確認

```bash
npm run dev
```

1. 映画A: 「チェンソーマン」
2. 映画B: 「鬼滅の刃」
3. スケジュール検索

→ モックデータで最適化ロジックの動作確認ができます

### オプション2: TMDb APIで映画検索

```bash
# API Keyを取得して設定
echo "NEXT_PUBLIC_TMDB_API_KEY=your_key" >> .env.local

# 開発サーバーを再起動
npm run dev
```

### オプション3: ユーザー入力UIの追加（推奨）

次のステップとして、以下のUIを追加できます：

```typescript
// 映画選択 → 上映時間を手動入力 → スケジュール最適化
```

## 次のステップ

実際に使えるシステムにするために、以下のどちらかを選択してください：

### A. ユーザー入力方式を実装（推奨）
```
1. 映画選択フォーム
2. 劇場と上映時間の手動入力UI
3. 入力データで最適化ロジック実行
```

### B. データベース構築
```
1. Supabase/Firebaseなどのセットアップ
2. 手動でデータ登録
3. APIから取得
```

### C. TMDb APIと組み合わせ
```
1. TMDbで映画情報取得
2. 上映時間は手動入力
3. リッチなUI体験を提供
```

どれを実装しますか？
